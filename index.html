<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Portugu√™s - Gram√°tica</title>
    <!-- Carrega o Tailwind CSS CDN para estiliza√ß√£o -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Cores base do c√≥digo original */
            --cor-facil: #DFFFD6;
            --cor-medio: #FFF3D1;
            --cor-dificil: #FFD6D6;
            --cor-fundo: #F0F8FF;
            --cor-botao-principal: #4E73DF;
            --cor-texto: #333333;
            /* Cores de feedback */
            --cor-acerto: #4ade80; /* Tailwind green-400 */
            --cor-erro: #f87171; /* Tailwind red-400 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--cor-fundo);
            transition: background-color 0.5s ease;
        }
        .container {
            max-width: 600px;
            margin: auto;
        }
        .screen {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        /* Custom Button Style for better interaction */
        .quiz-button {
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .quiz-button:not([disabled]):hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .answer-button-default {
            background-color: #ffffff;
            color: var(--cor-texto);
        }
        .answer-button-default:hover:not([disabled]) {
             background-color: #f3f4f6;
        }
    </style>
</head>
<body id="body">

    <div class="container p-4">

        <!-- 1. Tela Inicial (Menu) -->
        <div id="menu-screen" class="screen">
            <h1 class="text-4xl font-extrabold mb-8 text-center" style="color: var(--cor-texto);">
                üéì Bem-vindo ao Quiz de Portugu√™s!
            </h1>
            <div class="w-full space-y-4 max-w-sm">
                <button onclick="escolher_nivel('F√°cil')" class="w-full quiz-button py-4 text-white text-xl font-bold rounded-lg bg-green-500 hover:bg-green-600 transition duration-300">
                    F√ÅCIL
                </button>
                <button onclick="escolher_nivel('M√©dio')" class="w-full quiz-button py-4 text-white text-xl font-bold rounded-lg bg-yellow-600 hover:bg-yellow-700 transition duration-300">
                    M√âDIO
                </button>
                <button onclick="escolher_nivel('Dif√≠cil')" class="w-full quiz-button py-4 text-white text-xl font-bold rounded-lg bg-red-500 hover:bg-red-600 transition duration-300">
                    DIF√çCIL
                </button>
            </div>
        </div>

        <!-- 2. Tela do Quiz (Oculta por padr√£o) -->
        <div id="quiz-screen" class="screen hidden" style="background-color: var(--cor-fundo);">
            <div class="w-full max-w-lg bg-white p-6 rounded-xl shadow-2xl">
                <div id="stats" class="text-sm text-gray-600 mb-4 flex justify-between">
                    <span id="contador-acertos">Acertos: 0</span>
                    <span id="contador-erros">Erros: 0</span>
                    <span id="contador-partidas">Partidas jogadas: 0</span>
                </div>
                
                <h2 id="question-text" class="text-2xl font-semibold mb-6 text-center" style="color: var(--cor-texto);">
                    Pergunta aqui
                </h2>

                <div id="answer-buttons-container" class="space-y-3">
                    <!-- Bot√µes de resposta ser√£o injetados aqui -->
                </div>

                <p id="result-message" class="text-2xl font-bold text-center mt-6 h-8"></p>

                <div class="mt-8 space-y-3">
                    <button id="next-question-btn" onclick="nova_rodada()" disabled class="w-full quiz-button py-3 text-white font-semibold rounded-lg bg-blue-500 hover:bg-blue-600 transition duration-300 disabled:opacity-50">
                        üéØ PR√ìXIMA PERGUNTA
                    </button>
                    <button id="back-to-menu-btn" onclick="voltar_menu()" class="w-full quiz-button py-3 text-white font-semibold rounded-lg bg-gray-500 hover:bg-gray-600 transition duration-300">
                        üîô VOLTAR AO MENU
                    </button>
                    <button id="exit-game-btn" onclick="sair_do_jogo()" class="w-full quiz-button py-3 text-white font-semibold rounded-lg bg-gray-700 hover:bg-gray-800 transition duration-300">
                        üö™ SAIR DO JOGO
                    </button>
                </div>
            </div>
        </div>

        <!-- 3. Tela Final (Oculta por padr√£o) -->
        <div id="final-screen" class="screen hidden">
            <div class="w-full max-w-lg bg-white p-8 rounded-xl shadow-2xl text-center">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">Fim do Jogo!</h2>
                <p id="final-result-text" class="text-xl text-gray-700 whitespace-pre-line">
                    Obrigado por jogar!
                </p>
                <button id="restart-btn" onclick="reiniciar_jogo()" class="w-full quiz-button mt-8 py-3 text-white font-bold rounded-lg bg-green-600 hover:bg-green-700 transition duration-300">
                    üîÅ REINICIAR JOGO
                </button>
            </div>
        </div>

    </div>

    <script>
        // Cores e estilos - Mapeamento para uso no JavaScript/CSS
        const Cores = {
            "F√°cil": "var(--cor-facil)",
            "M√©dio": "var(--cor-medio)",
            "Dif√≠cil": "var(--cor-dificil)",
            "Fundo": "var(--cor-fundo)",
            "Botao": "var(--cor-botao-principal)",
            "Texto": "var(--cor-texto)"
        };

        // Perguntas (Extra√≠das diretamente do c√≥digo Python)
        const dados_perguntas = {
            "F√°cil": [
                "Qual √© a classe gramatical da palavra 'alegremente'?;Adv√©rbio;Adjetivo;Verbo;Substantivo",
                "A palavra 'felicidade' √© um exemplo de:;Substantivo;Verbo;Adjetivo;Conjun√ß√£o",
                "A palavra 'em' pertence a qual classe gramatical?;Preposi√ß√£o;Verbo;Adv√©rbio;Artigo",
                "A palavra 'mas' √© uma:;Conjun√ß√£o;Interjei√ß√£o;Artigo;Substantivo",
                "A palavra 'Ah!' √© uma:;Interjei√ß√£o;Adv√©rbio;Conjun√ß√£o;Preposi√ß√£o",
                "A palavra 'o' em 'o menino chegou' √© um:;Artigo;Verbo;Conjun√ß√£o;Pronome",
                "Qual palavra est√° escrita corretamente?;Enxergar;Enxergarh;Enchergar;Enxegar",
                "Qual das palavras leva acento?;P√¥de;Pode;Pude;Podo",
                "Qual √© o plural de 'animal'?;Animais;Animales;Animau;Anim√£os",
                "Qual palavra completa: 'Eu ___ feliz'?;estou;esta;est√°;estamos",
                "Qual √© a classe da palavra 'cachorro'?;Substantivo;Verbo;Adjetivo;Conjun√ß√£o",
                "A palavra 'r√°pido' em 'carro r√°pido' √© um:;Adjetivo;Verbo;Adv√©rbio;Preposi√ß√£o",
                "A palavra 'de' √© uma:;Preposi√ß√£o;Verbo;Conjun√ß√£o;Substantivo",
                "'E' em 'Jo√£o e Maria' √© uma:;Conjun√ß√£o;Artigo;Verbo;Substantivo",
                "A palavra 'o' em 'o livro' √©:;Artigo;Verbo;Adjetivo;Substantivo",
                "A palavra 'aqui' √© um:;Adv√©rbio;Substantivo;Adjetivo;Verbo",
                "'Ai!' √© exemplo de:;Interjei√ß√£o;Adv√©rbio;Conjun√ß√£o;Adjetivo",
                "Qual dessas √© um substantivo?;Casa;R√°pido;Com;Ou",
                "Qual dessas √© um verbo?;Correr;Mesa;Bonito;Sim",
                "Qual dessas √© um adv√©rbio?;Ontem;Mesa;Bonito;Gato",
                "Qual palavra est√° com a ortografia correta?;Exce√ß√£o;Execess√£o;Esce√ß√£o;Exce√ß√£oo",
                "A palavra 'muito' √© classificada como:;Adv√©rbio;Verbo;Substantivo;Conjun√ß√£o",
                "Qual das palavras leva acento?;F√°cil;Facil;Fac√≠l;Faciil",
                "Qual dessas √© uma interjei√ß√£o?;Oba!;Sim;Com;Bonito",
                "O que √© um artigo?;Palavra que acompanha o substantivo;Verbo no passado;Conjun√ß√£o entre frases;Palavra que substitui verbo",
                "A palavra 'azul' em 'carro azul' √©:;Adjetivo;Verbo;Substantivo;Conjun√ß√£o",
                "'Mas' √© um exemplo de:;Conjun√ß√£o;Artigo;Adjetivo;Substantivo",
                "A palavra 'em' pertence a qual classe?;Preposi√ß√£o;Verbo;Adv√©rbio;Artigo",
                "Qual destas palavras √© uma preposi√ß√£o?;Com;Mesa;Correr;Lindo",
                "A palavra 'n√£o' √© um:;Adv√©rbio;Verbo;Substantivo;Conjun√ß√£o",
                "Qual √© o ant√¥nimo de 'grande'?;Pequeno;Enorme;Largo;Comprido",
                "A palavra 'bondade' √© um:;Substantivo Abstrato;Substantivo Comum;Adjetivo;Verbo",
                "Qual das palavras √© um sin√¥nimo de 'feliz'?;Contente;Triste;Bravo;Cansado",
                "A palavra 'lentamente' indica:;Modo;Tempo;Lugar;Intensidade",
                "Qual a vogal que completa a palavra 'c_sa'?;a;e;i;o",
                "Quantas letras tem a palavra 'Brasil'?;Seis;Cinco;Sete;Quatro",
                "Qual √© a cor do cabelo de um elefante?;Nenhuma;Cinza;Preto;Marrom",
                "O que a galinha bota?;Ovo;Leite;Mel;Carne",
                "Qual destas √© uma preposi√ß√£o simples?;Para;E;Mas;Ou",
                "A palavra 'cantava' √© um verbo no:;Passado;Presente;Futuro;Infinitivo"
            ],
            "M√©dio": [
                "Qual √© o sujeito da frase: 'O cachorro latiu a noite toda.'?;O cachorro;a noite toda;latiu;toda",
                "Na frase 'Ela correu rapidamente', o termo 'rapidamente' √©:;Adjunto adverbial;Adjunto adnominal;Sujeito;Predicado",
                "Na frase 'O menino inteligente venceu a prova', o termo 'inteligente' √©:;Adjunto adnominal;Aposto;Predicado;Adjunto adverbial",
                "Qual est√° acentuada corretamente?;J√∫ri;Juri;Jur√≠;Jurii",
                "A palavra 'r√°pido' em 'ele corre r√°pido' √© um:;Adv√©rbio;Verbo;Adjetivo;Artigo",
                "A palavra 'com' pertence a qual classe gramatical?;Preposi√ß√£o;Verbo;Substantivo;Conjun√ß√£o",
                "Qual √© a fun√ß√£o da palavra 'n√£o' em 'Ele n√£o foi √† escola'?;Adv√©rbio;Verbo;Substantivo;Conjun√ß√£o",
                "A palavra 'por√©m' √© um exemplo de:;Conjun√ß√£o adversativa;Adv√©rbio;Pronome;Preposi√ß√£o",
                "O termo 'as crian√ßas' em 'As crian√ßas brincavam' √©:;Sujeito simples;Verbo;Objeto direto;Predicado",
                "Na frase 'O menino correu', 'O menino' √© o:;Sujeito;Verbo;Objeto direto;Adjunto adnominal",
                "Em 'Ela canta bem', 'bem' √©:;Adv√©rbio;Verbo;Adjetivo;Artigo",
                "'O cachorro bonito latiu' ‚Äì 'bonito' √©:;Adjetivo;Verbo;Substantivo;Preposi√ß√£o",
                "Qual termo √© essencial da ora√ß√£o?;Sujeito;Adjunto adnominal;Vocativo;Adjunto adverbial",
                "Em 'Eles sa√≠ram ontem', 'ontem' √©:;Adjunto adverbial;Adjunto adnominal;Objeto direto;Predicado",
                "Em 'Ana, minha amiga, chegou', 'minha amiga' √©:;Aposto;Vocativo;Adjunto;Sujeito",
                "'Apesar de' √©:;Locu√ß√£o prepositiva;Conjun√ß√£o;Artigo;Verbo",
                "A palavra 'com' √© uma:;Preposi√ß√£o;Conjun√ß√£o;Substantivo;Adv√©rbio",
                "'R√°pido' em 'ele corre r√°pido' √©:;Adv√©rbio;Verbo;Adjetivo;Artigo",
                "O termo 'muito' em 'muito bonita' √©:;Adv√©rbio;Substantivo;Verbo;Adjetivo",
                "Qual √© o objeto direto em 'Pedro chutou a bola'?;a bola;Pedro;chutou;bola",
                "Acento correto:;√Årvore;Arvore;√Årvor√©;Arvor√™",
                "'O menino leu o livro' ‚Äì 'o livro' √©:;Objeto direto;Sujeito;Verbo;Adjunto adverbial",
                "Na frase 'Eles gostam de estudar', 'de estudar' √©:;Objeto indireto;Objeto direto;Sujeito;Adjunto",
                "O que √© vocativo?;Chamamento;Sujeito;Predicado;Objeto direto",
                "Em 'Comemos pizza ontem', 'ontem' √©:;Adjunto adverbial;Objeto direto;Sujeito;Predicado",
                "O termo 'muitas flores' em 'Ele deu muitas flores' √©:;Objeto direto;Adjunto adverbial;Verbo;Aposto",
                "'Com certeza' √© uma:;Locu√ß√£o adverbial;Locu√ß√£o verbal;Interjei√ß√£o;Preposi√ß√£o",
                "Em 'Maria e Jo√£o brincam', 'e' √©:;Conjun√ß√£o;Verbo;Preposi√ß√£o;Adjetivo",
                "Em 'Ele correu com pressa', 'com pressa' √©:;Adjunto adverbial;Objeto direto;Sujeito;Artigo",
                "Na ora√ß√£o 'Choveu muito ontem', o sujeito √©:;Inexistente;Simples;Composto;Oculto",
                "Qual a fun√ß√£o sint√°tica de 'ao amigo' em 'Ele entregou o livro ao amigo'?;Objeto Indireto;Objeto Direto;Complemento Nominal;Adjunto Adverbial",
                "A palavra 'escorrega' no sentido figurado √©:;Escorregar;Enganar-se;Deslizar;Cair",
                "Qual das alternativas apresenta um sujeito composto?;Jo√£o e Maria viajaram.;Choveu muito.;Os c√£es latem.;Eu comi bolo.",
                "Em 'Ele √© **t√£o** alto **quanto** voc√™', os termos destacados s√£o:;Conjun√ß√µes comparativas;Adv√©rbios;Preposi√ß√µes;Pronomes",
                "Qual a figura de linguagem em 'Fui ao m√©dico para ver se estou vivo'?;Ironia;Met√°fora;Compara√ß√£o;Eufemismo",
                "A v√≠rgula √© obrigat√≥ria em:;Vocativo;Sujeito composto;Objeto direto;Predicado verbal",
                "Na frase 'Ainda que chova, irei', 'Ainda que chova' √© uma ora√ß√£o:;Subordinada Adverbial Concessiva;Subordinada Adverbial Temporal;Subordinada Adverbial Causal;Subordinada Adverbial Condicional",
                "Qual o predicado em 'O professor explicou a mat√©ria com clareza'?;explicou a mat√©ria com clareza;O professor;a mat√©ria;com clareza",
                "O que √© um verbo de liga√ß√£o?;Verbo que liga o sujeito ao predicativo;Verbo que indica a√ß√£o;Verbo que indica estado;Verbo que liga duas ora√ß√µes"
            ],
            "Dif√≠cil": [
                "Qual √© o tipo de sujeito em 'H√° muitos alunos na sala.'?;Inexistente;Simples;Oculto;Composto",
                "Na frase 'Carlos, meu amigo, chegou.', 'meu amigo' √© um:;Aposto;Vocativo;Adjunto;Predicativo",
                "Em 'Pedro chamou Ana', qual √© o objeto direto?;Ana;Pedro;chamou;chamar",
                "A palavra 'embora' pode ser:;Conjun√ß√£o;Preposi√ß√£o;Substantivo;Verbo",
                "Qual termo exerce fun√ß√£o de n√∫cleo do sujeito?;Substantivo;Verbo;Adv√©rbio;Conjun√ß√£o",
                "'Apesar de' √© uma:;Locu√ß√£o prepositiva;Conjun√ß√£o;Artigo;Adv√©rbio",
                "A frase 'Quando ele chegou, sa√≠mos' cont√©m:;Ora√ß√µes subordinadas;Ora√ß√µes coordenadas;Per√≠odo simples;Vocativo",
                "Na frase 'Foi ele quem fez tudo', a palavra 'quem' √©:;Pronome relativo;Conjun√ß√£o;Substantivo;Artigo",
                "Tipo de sujeito em 'Chove muito':;Inexistente;Simples;Oculto;Composto",
                "'Jo√£o, o m√©dico, chegou' ‚Äì 'o m√©dico' √©:;Aposto;Vocativo;Predicativo;Adjunto adnominal",
                "'Fizemos tudo sozinhos' ‚Äì 'sozinhos' √©:;Predicativo;Adjetivo;Sujeito;Aposto",
                "'Quem' em 'Foi ela quem fez' √©:;Pronome relativo;Conjun√ß√£o;Artigo;Verbo",
                "Termo 'por que' em 'Por que voc√™ saiu?' √©:;Pronome interrogativo;Conjun√ß√£o;Preposi√ß√£o;Adv√©rbio",
                "Classifica√ß√£o de 'talvez' em 'Talvez chova':;Adv√©rbio;Verbo;Conjun√ß√£o;Substantivo",
                "'Embora' em 'Embora cansado, foi' √©:;Conjun√ß√£o;Adv√©rbio;Preposi√ß√£o;Substantivo",
                "Fun√ß√£o do termo 'triste' em 'Ele saiu triste':;Predicativo;Adjunto adverbial;Aposto;Verbo",
                "'Aquela menina que chegou' ‚Äì 'que' √©:;Pronome relativo;Verbo;Artigo;Adv√©rbio",
                "Tipo de sujeito em 'Venderam tudo ontem':;Indeterminado;Simples;Inexistente;Composto",
                "'Apesar de tudo' √©:;Locu√ß√£o prepositiva;Locu√ß√£o adverbial;Conjun√ß√£o;Adjetivo",
                "'Segundo o autor' ‚Äì 'Segundo' √©:;Preposi√ß√£o;Verbo;Conjun√ß√£o;Adjetivo",
                "Fun√ß√£o do termo 'felizes' em 'Eles estavam felizes':;Predicativo;Adjunto adverbial;Aposto;Sujeito",
                "'Correr' em 'Gosto de correr' √©:;Verbo no infinitivo;Substantivo;Adjetivo;Adv√©rbio",
                "'Ora√ß√µes subordinadas' aparecem em:;Frases dependentes;Frases coordenadas;Per√≠odo simples;Predicados nominais",
                "'N√£o' em 'Ele n√£o correu' √©:;Adv√©rbio de nega√ß√£o;Conjun√ß√£o;Preposi√ß√£o;Pronome",
                "Fun√ß√£o do termo 'r√°pido' em 'Ele √© r√°pido':;Predicativo do sujeito;Adjunto;Objeto;Verbo",
                "'Ela mesma fez' ‚Äì 'mesma' √©:;Pronome demonstrativo;Adv√©rbio;Artigo;Conjun√ß√£o",
                "'O que me disse?' ‚Äì 'que' √©:;Pronome interrogativo;Adv√©rbio;Conjun√ß√£o;Substantivo",
                "'Nem' em 'Nem ele sabia' √©:;Conjun√ß√£o;Adv√©rbio;Verbo;Preposi√ß√£o",
                "Qual √© a classifica√ß√£o da ora√ß√£o subordinada em '√â necess√°rio que voc√™ estude.'?;Subjetiva;Objetiva Direta;Objetiva Indireta;Completiva Nominal",
                "Em 'Por mais que tentasse, n√£o conseguiu', 'Por mais que' introduz uma ora√ß√£o:;Concessiva;Temporal;Causal;Condicional",
                "A correta coloca√ß√£o pronominal em 'Me disseram a verdade' √©:;Disseram-me a verdade;A verdade disseram-me;Me a verdade disseram;Disseram-a-me a verdade",
                "Qual dos verbos abaixo √© bitransitivo?;Informar;Chegar;Correr;Cantar",
                "Identifique a ora√ß√£o subordinada adjetiva restritiva em:;Os alunos que estudam passam.;Os alunos, que estudam, passam.;Quando estudam, os alunos passam.;Para estudar, os alunos passam.",
                "Em 'A casa, onde moro, √© antiga', 'onde moro' √© uma ora√ß√£o:;Subordinada Adjetiva Explicativa;Subordinada Adjetiva Restritiva;Subordinada Adverbial Temporal;Subordinada Substantiva Apositiva",
                "Qual figura de linguagem consiste no emprego de uma palavra por outra, com sentido pr√≥ximo, mas sem semelhan√ßa?;Meton√≠mia;Met√°fora;Compara√ß√£o;Eufemismo",
                "O que √© anacoluto?;Quebra da estrutura sint√°tica da frase;Repeti√ß√£o de palavras;Uso de palavras antigas;Erro de concord√¢ncia",
                "Em 'Ele era um bom orador, embora n√£o falasse muito', a ora√ß√£o 'embora n√£o falasse muito' √©:;Subordinada Adverbial Concessiva;Subordinada Adverbial Conformativa;Subordinada Adverbial Causal;Subordinada Adverbial Temporal",
                "Qual a fun√ß√£o sint√°tica de 'de livros' em 'A leitura de livros √© fundamental'?;Complemento Nominal;Adjunto Adnominal;Objeto Indireto;Adjunto Adverbial",
                "Qual o objeto indireto em 'Preciso de ajuda urgente.'?;de ajuda;ajuda;urgente;Preciso",
                "A palavra 'onde' deve ser usada quando indica:;Lugar fixo;Tempo;Modo;Causa",
                "Qual ora√ß√£o apresenta objeto direto preposicionado?;Ele obedeceu ao pai.;Gosto de frutas.;Necessitamos de sil√™ncio.;Acredito em Deus.",
                "O que √© eufemismo?;Suaviza√ß√£o de uma ideia;Exagero de uma ideia;Contradi√ß√£o de ideias;Repeti√ß√£o de uma ideia",
                "Em 'Ele n√£o veio por causa da chuva', 'por causa da chuva' √© um:;Adjunto adverbial de causa;Adjunto adverbial de modo;Adjunto adnominal;Objeto indireto",
                "Qual a fun√ß√£o sint√°tica de 'o bravo' em 'Chamaram-no de bravo'?;Predicativo do objeto;Objeto direto;Objeto indireto;Aposto",
                "Em 'A verdade, ele sabia', 'a verdade' √© um:;Objeto direto pleon√°stico;Sujeito;Objeto indireto;Aposto",
                "Qual a classifica√ß√£o morfol√≥gica de 'cujo'?;Pronome relativo;Conjun√ß√£o;Adv√©rbio;Preposi√ß√£o",
                "O que √© s√≠ncope na fon√©tica?;Supress√£o de fonemas no meio da palavra;Acrescentar fonemas;Altera√ß√£o de fonemas;Invers√£o de fonemas",
                "Qual ora√ß√£o tem sujeito oculto (el√≠ptico)?;Comemos muito ontem.;Nevou na serra.;Venderam-se casas.;Faz calor."
            ]
        };

        // Estado do Jogo
        let acertos = 0;
        let partidas = 0;
        let erros = 0;
        let nivel_atual = "F√°cil";
        let respostas_ja_usadas = {
            "F√°cil": [],
            "M√©dio": [],
            "Dif√≠cil": []
        };
        let respostas_embaralhadas = [];

        // Refer√™ncias DOM
        const body = document.getElementById('body');
        const menuScreen = document.getElementById('menu-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const finalScreen = document.getElementById('final-screen');
        const questionText = document.getElementById('question-text');
        const answerButtonsContainer = document.getElementById('answer-buttons-container');
        const resultMessage = document.getElementById('result-message');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const contadorAcertos = document.getElementById('contador-acertos');
        const contadorErros = document.getElementById('contador-erros');
        const contadorPartidas = document.getElementById('contador-partidas');
        const finalResultText = document.getElementById('final-result-text');

        // Fun√ß√£o utilit√°ria para embaralhar um array (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Seleciona uma quest√£o aleat√≥ria e garante que n√£o se repita at√© que todas tenham sido usadas.
         * @returns {string[]} [Pergunta, Resposta Correta, Errada 1, Errada 2, Errada 3]
         */
        function questao_aleatoria() {
            let perguntas_disponiveis = dados_perguntas[nivel_atual].filter(p => !respostas_ja_usadas[nivel_atual].includes(p));

            if (perguntas_disponiveis.length === 0) {
                // Se todas as perguntas foram usadas, reseta o pool de respostas usadas
                respostas_ja_usadas[nivel_atual] = [];
                perguntas_disponiveis = dados_perguntas[nivel_atual].slice();
            }

            const pergunta = perguntas_disponiveis[Math.floor(Math.random() * perguntas_disponiveis.length)];
            respostas_ja_usadas[nivel_atual].push(pergunta);
            
            return pergunta.split(";");
        }

        /**
         * Inicia uma nova rodada: carrega a pergunta e as op√ß√µes.
         */
        function nova_rodada() {
            partidas++;
            const questao = questao_aleatoria();
            
            questionText.textContent = questao[0];
            
            // Estrutura de respostas: [Texto, √â Correta]
            respostas_embaralhadas = [
                { text: questao[1], isCorrect: true },
                { text: questao[2], isCorrect: false },
                { text: questao[3], isCorrect: false },
                { text: questao[4], isCorrect: false }
            ];
            
            shuffleArray(respostas_embaralhadas);

            // Renderiza os bot√µes de resposta
            answerButtonsContainer.innerHTML = '';
            respostas_embaralhadas.forEach((resposta, index) => {
                const button = document.createElement('button');
                button.textContent = `${String.fromCharCode(65 + index)}) ${resposta.text}`;
                button.setAttribute('onclick', `responder(${index})`);
                button.id = `answer-btn-${index}`;
                button.className = 'w-full quiz-button py-3 text-lg font-semibold rounded-lg answer-button-default text-left px-4 transition duration-200';
                answerButtonsContainer.appendChild(button);
            });

            // Resetar estado da rodada
            resultMessage.textContent = "";
            nextQuestionBtn.disabled = true;
            
            // Atualizar contadores
            contadorPartidas.textContent = `Partidas jogadas: ${partidas}`;
        }

        /**
         * Processa a resposta do usu√°rio.
         * @param {number} indice - O √≠ndice da resposta selecionada.
         */
        function responder(indice) {
            const respostaSelecionada = respostas_embaralhadas[indice];
            const isCorrect = respostaSelecionada.isCorrect;
            const button = document.getElementById(`answer-btn-${indice}`);
            
            // Atualiza a cor do bot√£o selecionado
            button.classList.remove('answer-button-default');
            button.style.backgroundColor = isCorrect ? 'var(--cor-acerto)' : 'var(--cor-erro)';
            button.style.color = 'white';

            if (isCorrect) {
                acertos++;
                resultMessage.textContent = "‚úÖ VOC√ä ACERTOU!";
                resultMessage.classList.remove('text-red-500');
                resultMessage.classList.add('text-green-500');
            } else {
                erros++;
                resultMessage.textContent = "‚ùå VOC√ä ERROU!";
                resultMessage.classList.remove('text-green-500');
                resultMessage.classList.add('text-red-500');

                // Destaca a resposta correta
                const indiceCorreto = respostas_embaralhadas.findIndex(r => r.isCorrect);
                const correctButton = document.getElementById(`answer-btn-${indiceCorreto}`);
                correctButton.style.backgroundColor = 'var(--cor-acerto)';
                correctButton.style.color = 'white';
                correctButton.classList.remove('answer-button-default');
            }

            // Desabilita todos os bot√µes de resposta
            answerButtonsContainer.querySelectorAll('button').forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('hover:bg-gray-100');
            });
            
            // Habilita o bot√£o de pr√≥xima pergunta
            nextQuestionBtn.disabled = false;

            // Atualiza os contadores na UI
            contadorAcertos.textContent = `Acertos: ${acertos}`;
            contadorErros.textContent = `Erros: ${erros}`;
        }

        /**
         * Configura o jogo para o n√≠vel escolhido.
         * @param {string} nivel - 'F√°cil', 'M√©dio' ou 'Dif√≠cil'.
         */
        function escolher_nivel(nivel) {
            nivel_atual = nivel;
            resetar_contadores();
            
            // Mudar cor de fundo baseado no n√≠vel
            body.style.backgroundColor = Cores[nivel];

            // Trocar telas
            menuScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            
            nova_rodada();
        }

        /**
         * Volta para a tela de menu.
         */
        function voltar_menu() {
            quizScreen.classList.add('hidden');
            finalScreen.classList.add('hidden');
            menuScreen.classList.remove('hidden');
            body.style.backgroundColor = Cores["Fundo"];
        }

        /**
         * Mostra a tela final com o resumo da pontua√ß√£o.
         */
        function sair_do_jogo() {
            quizScreen.classList.add('hidden');
            finalScreen.classList.remove('hidden');
            
            const totalPerguntas = partidas;
            const porcentagemAcertos = totalPerguntas > 0 ? ((acertos / totalPerguntas) * 100).toFixed(1) : 0;
            
            finalResultText.innerHTML = 
                `Obrigado por jogar no n√≠vel **${nivel_atual}**!\n\n` +
                `Total de Perguntas: ${totalPerguntas}\n` +
                `‚úÖ Acertos: ${acertos}\n` +
                `‚ùå Erros: ${erros}\n` +
                `**Aproveitamento: ${porcentagemAcertos}%**`;
            
            body.style.backgroundColor = Cores["Fundo"];
        }

        /**
         * Reseta as vari√°veis de pontua√ß√£o e as respostas usadas.
         */
        function resetar_contadores() {
            acertos = 0;
            erros = 0;
            partidas = 0;
            respostas_ja_usadas = { "F√°cil": [], "M√©dio": [], "Dif√≠cil": [] };
            
            contadorAcertos.textContent = `Acertos: ${acertos}`;
            contadorErros.textContent = `Erros: ${erros}`;
            contadorPartidas.textContent = `Partidas jogadas: ${partidas}`;
        }

        /**
         * Reinicia o jogo a partir da tela final (volta ao menu).
         */
        function reiniciar_jogo() {
            voltar_menu(); // A fun√ß√£o voltar_menu j√° oculta a tela final e mostra o menu
        }
    </script>
</body>
</html>
